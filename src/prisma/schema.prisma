datasource db {
    provider = "mongodb"
    url      = env("DB_URL")
}

generator client {
    provider = "prisma-client-js"
}

enum AccountStatus {
    ACTIVE
    INACTIVE
}

enum PostVisibility {
    PUBLIC
    PRIVATE
    FRIENDS
}

enum FrienshipStatus {
    PENDING
    ACCEPTED
}

enum PostStatus {
    ARCHIVED
    DRAFT
}

type Place {
    city    String?
    region  String?
    country String
}

type WorkExperience {
    startYear Int
    endYear   Int
    company   String
    position  String
}

model User {
    id                               String         @id @default(auto()) @map("_id") @db.ObjectId
    email                            String         @unique
    firstName                        String
    lastName                         String
    dateOfBirth                      DateTime
    password                         String
    currentPlace                     Place
    education                        String?
    workExperience                   WorkExperience
    status                           AccountStatus  @default(INACTIVE)
    activationToken                  String?
    passwordResetToken               String?
    passwordResetTokenExpirationDate DateTime?
    createdAt                        DateTime       @default(now())
    updatedAt                        DateTime       @updatedAt
}

type Content {
    text String?
}

type Comment {
    id        String
    postId    String?  @db.ObjectId
    userId    String?  @db.ObjectId
    createdAt DateTime @default(now())
}

model Post {
    id        String         @id @default(auto()) @map("_id") @db.ObjectId
    content   Content
    comments  Comment[]
    status    PostVisibility @default(PUBLIC)
    createdAt DateTime       @default(now())
    updatedAt DateTime       @updatedAt
    userId    String?        @db.ObjectId
    likeCount Int            @default(0)
}

model Like {
    id       String   @id @default(auto()) @map("_id") @db.ObjectId
    userId   String?  @db.ObjectId
    postId   String?  @db.ObjectId
    likeTime DateTime @default(now())
}

// model Comment {
//     id        String   @id @default(auto()) @map("_id") @db.ObjectId
//     userId    String?  @db.ObjectId
//     postId    String?  @db.ObjectId
//     createdAt DateTime @default(now())
//     updatedAt DateTime @updatedAt
// }

model Friendship {
    id      String          @id @default(auto()) @map("_id") @db.ObjectId
    userAId String          @db.ObjectId
    userBId String          @db.ObjectId
    status  FrienshipStatus @default(PENDING)
}
